/** dchart - v0.0.4 - Sun Jul 28 2013 19:58:56
 *  (c) 2013 Christoph KÃ¶rner, office@chaosmail.at, http://chaosmail.at
 *  License: MIT
 */
var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},dChart;!function(a){var b=function(){function b(){this.lineStyle=new a.Utils.LineStyle,this.areaStyle=new a.Utils.AreaStyle}return b.prototype.normalize=function(b){b.hasOwnProperty("stroke")&&(this.lineStyle.stroke=new a.Utils.Color(b.stroke)),b.hasOwnProperty("strokeWidth")&&(this.lineStyle.strokeWidth=new a.Utils.Size(parseFloat(b.strokeWidth))),b.hasOwnProperty("strokeOpacity")&&(this.lineStyle.strokeOpacity=parseFloat(b.strokeOpacity)),b.hasOwnProperty("fill")&&(this.areaStyle.fill=new a.Utils.Color(b.fill)),b.hasOwnProperty("fillOpacity")&&(this.areaStyle.fillOpacity=parseFloat(b.fillOpacity))},b.prototype.map=function(b,c){b.hasOwnProperty(c.stroke)&&(this.lineStyle.stroke=new a.Utils.Color(b[c.stroke])),b.hasOwnProperty(c.strokeWidth)&&(this.lineStyle.strokeWidth=new a.Utils.Size(parseFloat(b[c.strokeWidth]))),b.hasOwnProperty(c.strokeOpacity)&&(this.lineStyle.strokeOpacity=parseFloat(b[c.strokeOpacity])),b.hasOwnProperty(c.fill)&&(this.areaStyle.fill=new a.Utils.Color(b[c.fill])),b.hasOwnProperty(c.fillOpacity)&&(this.areaStyle.fillOpacity=parseFloat(b[c.fillOpacity]))},b.prototype.parse=function(b){var c=this;_.map(b.attributes,function(b){return b.nodeName.match(/^stroke$/i)?(c.lineStyle.stroke=a.Utils.Elem.getColor(b),void 0):b.nodeName.match(/^stroke-width$/i)?(c.lineStyle.strokeWidth=a.Utils.Elem.getSize(b),void 0):b.nodeName.match(/^stroke-opacity$/i)?(c.lineStyle.strokeOpacity=a.Utils.Elem.getFloat(b),void 0):b.nodeName.match(/^fill$/i)?(c.areaStyle.fill=a.Utils.Elem.getColor(b),void 0):b.nodeName.match(/^fill-opacity$/i)?(c.areaStyle.fillOpacity=a.Utils.Elem.getFloat(b),void 0):void 0})},b}();a.Point=b;var c=function(b){function c(a){b.call(this),this.x=a}return __extends(c,b),c.prototype.normalize=function(a){b.prototype.normalize.call(this,a),a.hasOwnProperty("x")?this.x=parseFloat(a.x):a.hasOwnProperty("y")?this.x=parseFloat(a.y):a.hasOwnProperty("val")&&(this.x=parseFloat(a.val)),a.hasOwnProperty("value")&&(this.x=parseFloat(a.value))},c.prototype.map=function(a,c){b.prototype.map.call(this,a,c),a.hasOwnProperty(c.x)&&(this.x=parseFloat(a[c.x]))},c.prototype.parse=function(c){var d=this;b.prototype.parse.call(this,c),_.map(c.attributes,function(b){return b.nodeName.match(/^x$/i)?(d.x=a.Utils.Elem.getFloat(b),void 0):b.nodeName.match(/^y|val|value$/i)?(d.x=a.Utils.Elem.getFloat(b),void 0):void 0})},c}(b);a.Point1D=c;var d=function(a){function b(b,c){a.call(this),this.x=b,this.y=c}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("x")&&(this.x=parseFloat(b.x)),b.hasOwnProperty("y")?this.y=parseFloat(b.y):b.hasOwnProperty("val")&&(this.y=parseFloat(b.val)),b.hasOwnProperty("value")&&(this.y=parseFloat(b.value))},b.prototype.map=function(b,c){a.prototype.map.call(this,b,c),b.hasOwnProperty(c.x)&&(this.x=parseFloat(b[c.x])),b.hasOwnProperty(c.y)&&(this.y=parseFloat(b[c.y]))},b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),_.map(b.attributes,function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y|val|value$/i)?(c.y=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point2D=d;var e=function(b){function c(a,c){b.call(this),this.t=a,this.y=c}return __extends(c,b),c.prototype.normalize=function(a){b.prototype.normalize.call(this,a),a.hasOwnProperty("x")?this.t=new Date(a.x):a.hasOwnProperty("t")?this.t=new Date(a.t):a.hasOwnProperty("time")?this.t=new Date(a.time):a.hasOwnProperty("date")&&(this.t=new Date(a.date)),a.hasOwnProperty("y")?this.y=parseFloat(a.y):a.hasOwnProperty("val")&&(this.y=parseFloat(a.val)),a.hasOwnProperty("value")&&(this.y=parseFloat(a.value))},c.prototype.map=function(a,c){b.prototype.map.call(this,a,c),a.hasOwnProperty(c.t)&&(this.t=new Date(a[c.t])),a.hasOwnProperty(c.y)&&(this.y=parseFloat(a[c.y]))},c.prototype.parse=function(c){var d=this;b.prototype.parse.call(this,c),_.map(c.attributes,function(b){return b.nodeName.match(/^x|t|time|date$/i)?(d.t=a.Utils.Elem.getDate(b),void 0):b.nodeName.match(/^y|val|value$/i)?(d.y=a.Utils.Elem.getFloat(b),void 0):void 0})},c}(b);a.Point2DTime=e;var f=function(a){function b(b,c,d){a.call(this),this.x=b,this.y=c,this.z=d}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("x")&&(this.x=parseFloat(b.x)),b.hasOwnProperty("y")&&(this.y=parseFloat(b.y)),b.hasOwnProperty("z")&&(this.z=parseFloat(b.z))},b.prototype.map=function(b,c){a.prototype.map.call(this,b,c),b.hasOwnProperty(c.x)&&(this.x=parseFloat(b[c.x])),b.hasOwnProperty(c.y)&&(this.y=parseFloat(b[c.y])),b.hasOwnProperty(c.z)&&(this.z=parseFloat(b[c.z]))},b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),_.map(b.attributes,function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.y=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^z$/i)?(c.z=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point3D=f;var g=function(a){function b(b,c,d){a.call(this),this.t=b,this.y=c,this.z=d}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("x")?this.t=new Date(b.x):b.hasOwnProperty("t")?this.t=new Date(b.t):b.hasOwnProperty("time")?this.t=new Date(b.time):b.hasOwnProperty("date")&&(this.t=new Date(b.date)),b.hasOwnProperty("y")&&(this.y=parseFloat(b.y)),b.hasOwnProperty("z")&&(this.z=parseFloat(b.z))},b.prototype.map=function(b,c){a.prototype.map.call(this,b,c),b.hasOwnProperty(c.t)&&(this.t=new Date(b[c.t])),b.hasOwnProperty(c.y)&&(this.y=parseFloat(b[c.y])),b.hasOwnProperty(c.z)&&(this.z=parseFloat(b[c.z]))},b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),_.map(b.attributes,function(a){return a.nodeName.match(/^x|t|time|date$/i)?(c.t=new Date(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.y=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^z$/i)?(c.z=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point3DTime=g}(dChart||(dChart={}));var dChart;!function(a){!function(a){var b=function(){function a(){}return a.getFloat=function(a){return parseFloat(a.nodeValue)},a.getSize=function(a){return new d(parseFloat(a.nodeValue))},a.getColor=function(a){return new c(a.nodeValue)},a.getDate=function(a){return new Date(a.nodeValue)},a}();a.Elem=b;var c=function(){function a(a){this.value=a}return a.prototype.get=function(){return this.value},a.prototype.RGB=function(){return d3.rgb(this.value)},a.prototype.HSL=function(){return d3.hsl(this.value)},a.prototype.HCL=function(){return d3.hcl(this.value)},a.prototype.LAB=function(){return d3.lab(this.value)},a}();a.Color=c;var d=function(){function a(a){this.value=a}return a.prototype.get=function(){return this.value.toString(10)+"px"},a.prototype.sub=function(a){return this.value-=a.value,this},a.prototype.add=function(a){return this.value+=a.value,this},a.prototype.mul=function(a){return this.value*=a.value,this},a.prototype.div=function(a){return this.value/=a.value,this},a}();a.Size=d;var e=function(){function a(){}return a.prototype.get=function(){return""},a}();a.LineStyle=e;var f=function(){function a(){}return a.prototype.get=function(){return""},a}();a.AreaStyle=f}(a.Utils||(a.Utils={})),a.Utils}(dChart||(dChart={}));var dChart;!function(a){var b=function(){function b(b){this.axisLabel=b,this.clamp=!1,this.range=[0,1],this.domain=[0,1],this.autorange=!0,this.scale=d3.scale.linear(),this.length=new a.Utils.Size(1),this.orientation="x",this.align="start",this.labelAlign="end",this.nice=[],this.ticks=10,this.visible=!0}return b.prototype.setScale=function(a){return"undefined"==typeof a&&(a="linear"),this.scale=a.match(/^identity$/i)?d3.scale.identity():a.match(/^pow|power$/i)?d3.scale.pow():a.match(/^sqrt$/)?d3.scale.sqrt():a.match(/^log$/)?d3.scale.log():a.match(/^quantize/)?d3.scale.quantize():a.match(/^quantile$/)?d3.scale.quantile():a.match(/^treshold$/)?d3.scale.treshold():d3.scale.linear(),this.scale.domain(this.domain).range(this.range),this},b.prototype.setOrientation=function(a){return"undefined"==typeof a&&(a="x"),this.orientation=a.match(/^y|v|vertical$/i)?"y":a.match(/^z$/i)?"z":"x",this},b.prototype.setDomain=function(a){return"undefined"==typeof a&&(a=[0,1]),this.domain=a,this},b.prototype.setRange=function(a){return"undefined"==typeof a&&(a=[0,this.length.value]),this.range=a,this},b.prototype.setTicks=function(a){"undefined"==typeof a&&(a=10),this.ticks=a},b.prototype.setLabelAlign=function(a){return this.labelAlign=a.match(/^top|left|start$/i)?"start":a.match(/^bottom|right|end$/i)?"end":"center",this},b.prototype.getAxis=function(){d3.svg.axis().scale(this.scale).orient(this.labelAlign).ticks(this.ticks)},b.prototype.draw=function(a,b,c){var d=this;this.autorange===!0&&(this.range=[b,c]),"center"===this.align?.5*a.value:"start"===this.align?0:a.value;var e="start"===this.align?"top":"bottom";"start"===this.labelAlign?0:"center"===this.labelAlign?.5*a.value:a.value;var f=null;f=f.domain(this.range).range([0,a.value]);var g=d3.svg.axis().scale(f).orient(e).ticks(this.ticks);this.ticksFormat.length>0&&g.tickFormat(function(a){return d.ticksFormat[a]})},b}();a.Axis=b}(dChart||(dChart={}));var dChart;!function(a){!function(b){var c=function(){function b(){this.min=0,this.max=10,this.step=1}return b.prototype.fn=function(a){return a},b.prototype.solve=function(b,c,d){b=b||this.min,c=c||this.max,d=d||this.step;var e,f=[];for(e=b;c>=e;e+=d)f.push(new a.Point2D(e,this.fn(e)));return f},b}();b.Solver2D=c;var d=function(){function b(){this.min=0,this.max=10,this.step=1}return b.prototype.fn=function(a){return a},b.prototype.solve=function(b,c,d){b=b||this.min,c=c||this.max,d=d||this.step;var e,f,g=[];for(e=b;c>=e;e+=d)g.push(new a.Point3D(e,f,this.fn(e,f)));return g},b}();b.Solver3D=d}(a.Solver||(a.Solver={})),a.Solver}(dChart||(dChart={}));var dChart;!function(a){var b=function(){function b(b){this.dataSetLabel=b,this.data=[],this.label="",this.interpolate="linear",this.visible=!0,this.lineStyle=new a.Utils.LineStyle,this.areaStyle=new a.Utils.AreaStyle}return b.prototype.Point=function(){return new a.Point},b.prototype.recalculate=function(){},b.prototype.parse=function(b){var c=this;_.map(b.attributes,function(b){if(b.nodeName.match(/^label$/i))return c.label=b.nodeValue,void 0;if(b.nodeName.match(/^interpolate$/i))return c.interpolate=b.nodeValue,void 0;if(!b.nodeName.match(/^min$/i)&&!b.nodeName.match(/^max$/i)&&!b.nodeName.match(/^step$/i))return b.nodeName.match(/^stroke$/i)?(c.lineStyle.stroke=new a.Utils.Color(b.nodeValue),void 0):b.nodeName.match(/^stroke-width$/i)?(c.lineStyle.strokeWidth=new a.Utils.Size(parseFloat(b.nodeValue)),void 0):b.nodeName.match(/^stroke-opacity$/i)?(c.lineStyle.strokeOpacity=parseFloat(b.nodeValue),void 0):b.nodeName.match(/^fill$/i)?(c.areaStyle.fill=new a.Utils.Color(b.nodeValue),void 0):b.nodeName.match(/^fill-opacity$/i)?(c.areaStyle.fillOpacity=parseFloat(b.nodeValue),void 0):b.nodeName.match(/^data$/i)?(c.parseDataAttr(b),void 0):void 0}),_.map(b.childNodes,function(a){var b=c.Point();b.parse(a),c.data.push(b)})},b.prototype.min=function(){return 0},b.prototype.max=function(){return 0},b.prototype.parseDataAttr=function(a){var b=this;if(void 0!==a.nodeValue&&null!==a.nodeValue&&""!==a.nodeValue.trim()){var c=[];try{c=JSON.parse(a.nodeValue)}catch(d){}_.map(c,function(a){var c=b.Point();c.normalize(a),b.data.push(c)})}},b}();a.DataSet=b;var c=function(b){function c(){b.apply(this,arguments),this.data=[],this.solver=new a.Solver.Solver2D}return __extends(c,b),c.prototype.Point=function(){return new a.Point2D},c.prototype.recalculate=function(){this.data=this.solver.solve()},c.prototype.min=function(a){return d3.min(this.data,function(b){return b[a]})},c.prototype.max=function(a){return d3.max(this.data,function(b){return b[a]})},c}(b);a.DataSet2D=c;var d=function(b){function c(){b.apply(this,arguments),this.data=[],this.solver=new a.Solver.Solver3D}return __extends(c,b),c.prototype.Point=function(){return new a.Point3D},c.prototype.recalculate=function(){this.data=this.solver.solve()},c.prototype.min=function(a){return d3.min(this.data,function(b){return b[a]})},c.prototype.max=function(a){return d3.max(this.data,function(b){return b[a]})},c}(b);a.DataSet3D=d;var e=function(){function b(b,c){"undefined"==typeof b&&(b=new a.Utils.Size(400)),"undefined"==typeof c&&(c=new a.Utils.Size(400)),this.chartWidth=b,this.chartHeight=c,this.chartMarginLeft=new a.Utils.Size(10),this.chartMarginRight=new a.Utils.Size(10),this.chartMarginTop=new a.Utils.Size(10),this.chartMarginBottom=new a.Utils.Size(10)}return b}();a.Chart=e;var f=function(b){function c(){b.apply(this,arguments),this.xAxis=new a.Axis("x"),this.yAxis=new a.Axis("y")}return __extends(c,b),c.prototype.drawAxis=function(){var b=this.min(),c=this.max(),d=new a.Utils.Size(this.chartWidth.value).sub(this.chartMarginLeft).sub(this.chartMarginRight),e=new a.Utils.Size(this.chartHeight.value).sub(this.chartMarginTop).sub(this.chartMarginBottom);this.xAxis.draw(d,b[0],c[0]),this.yAxis.draw(e,b[1],c[1])},c.prototype.min=function(a){return"undefined"==typeof a&&(a="x"),d3.min(this.dataSets,function(b){return b.min(a)})},c.prototype.max=function(a){return"undefined"==typeof a&&(a="x"),d3.max(this.dataSets,function(b){return b.max(a)})},c}(e);a.Chart2D=f;var g=function(b){function c(){b.apply(this,arguments),this.chartDepth=new a.Utils.Size(400),this.xAxis=new a.Axis("x"),this.yAxis=new a.Axis("y"),this.zAxis=new a.Axis("z")}return __extends(c,b),c.prototype.drawAxis=function(){var b=this.min(),c=this.max(),d=new a.Utils.Size(this.chartWidth.value).sub(this.chartMarginLeft).sub(this.chartMarginRight),e=new a.Utils.Size(this.chartHeight.value).sub(this.chartMarginTop).sub(this.chartMarginBottom);this.xAxis.draw(d,b[0],c[0]),this.yAxis.draw(e,b[1],c[1]),this.zAxis.draw(this.chartDepth,b[2],c[2])},c.prototype.min=function(a){return"undefined"==typeof a&&(a="x"),d3.min(this.dataSets,function(b){return b.min(a)})},c.prototype.max=function(a){return"undefined"==typeof a&&(a="x"),d3.max(this.dataSets,function(b){return b.max(a)})},c}(e);a.Chart3D=g}(dChart||(dChart={}));