/** dchart - v0.0.4 - Sun Jul 28 2013 12:47:57
 *  (c) 2013 Christoph KÃ¶rner, office@chaosmail.at, http://chaosmail.at
 *  License: MIT
 */
var dChart;!function(a){!function(a){var b=function(){function a(){}return a.getFloat=function(a){return parseFloat(a.nodeValue)},a.getSize=function(a){return new d(parseFloat(a.nodeValue))},a.getColor=function(a){return new c(a.nodeValue)},a.getDate=function(a){return new Date(a.nodeValue)},a}();a.Elem=b;var c=function(){function a(a){this.value=a}return a.prototype.get=function(){return this.value},a.prototype.RGB=function(){return d3.rgb(this.value)},a.prototype.HSL=function(){return d3.hsl(this.value)},a.prototype.HCL=function(){return d3.hcl(this.value)},a.prototype.LAB=function(){return d3.lab(this.value)},a}();a.Color=c;var d=function(){function a(a){this.value=a}return a.prototype.get=function(){return this.value.toString(10)+"px"},a.prototype.sub=function(a){return this.value-=a.value,this},a.prototype.add=function(a){return this.value+=a.value,this},a.prototype.mul=function(a){return this.value*=a.value,this},a.prototype.div=function(a){return this.value/=a.value,this},a}();a.Size=d;var e=function(){function a(){}return a.prototype.get=function(){return""},a}();a.LineStyle=e;var f=function(){function a(){}return a.prototype.get=function(){return""},a}();a.AreaStyle=f}(a.Utils||(a.Utils={})),a.Utils}(dChart||(dChart={}));var dChart;!function(a){!function(b){var c=function(){function b(){this.min=0,this.max=10,this.step=1}return b.prototype.fn=function(a){return a},b.prototype.solve=function(b,c,d){b=b||this.min,c=c||this.max,d=d||this.step;var e,f=[];for(e=b;c>=e;e+=d)f.push(new a.Point2D(e,this.fn(e)));return f},b}();b.Solver2D=c;var d=function(){function b(){this.min=0,this.max=10,this.step=1}return b.prototype.fn=function(a){return a},b.prototype.solve=function(b,c,d){b=b||this.min,c=c||this.max,d=d||this.step;var e,f,g=[];for(e=b;c>=e;e+=d)g.push(new a.Point3D(e,f,this.fn(e,f)));return g},b}();b.Solver3D=d}(a.Solver||(a.Solver={})),a.Solver}(dChart||(dChart={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},dChart;!function(a){var b=function(){function b(){this.lineStyle=new a.Utils.LineStyle,this.areaStyle=new a.Utils.AreaStyle}return b.prototype.normalize=function(){},b.prototype.parse=function(b){var c=this;_.map(b.attributes,function(b){return b.nodeName.match(/^stroke$/i)?(c.lineStyle.stroke=new a.Utils.Color(b.nodeValue),void 0):b.nodeName.match(/^stroke-width$/i)?(c.lineStyle.strokeWidth=new a.Utils.Size(parseFloat(b.nodeValue)),void 0):b.nodeName.match(/^stroke-opacity$/i)?(c.lineStyle.strokeOpacity=parseFloat(b.nodeValue),void 0):b.nodeName.match(/^fill$/i)?(c.areaStyle.fill=new a.Utils.Color(b.nodeValue),void 0):b.nodeName.match(/^fill-opacity$/i)?(c.areaStyle.fillOpacity=parseFloat(b.nodeValue),void 0):void 0})},b}();a.Point=b;var c=function(a){function b(b){a.call(this),this.x=b}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.parse.call(this,b),"number"==typeof b&&(this.x=b)},b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),_.map(b.attributes,function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^val$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^value$/i)?(c.x=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point1D=c;var d=function(a){function b(b,c){a.call(this),this.x=b,this.y=c}return __extends(b,a),b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),_.map(b.attributes,function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.y=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^val$/i)?(c.y=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^value$/i)?(c.y=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point2D=d;var e=function(a){function b(b,c){a.call(this),this.x=b,this.t=c}return __extends(b,a),b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),_.map(b.attributes,function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.t=new Date(a.nodeValue),void 0):a.nodeName.match(/^val$/i)?(c.t=new Date(a.nodeValue),void 0):a.nodeName.match(/^value$/i)?(c.t=new Date(a.nodeValue),void 0):a.nodeName.match(/^t$/i)?(c.t=new Date(a.nodeValue),void 0):a.nodeName.match(/^time$/i)?(c.t=new Date(a.nodeValue),void 0):void 0})},b}(b);a.Point2DTime=e;var f=function(a){function b(b,c,d){a.call(this),this.x=b,this.y=c,this.z=d}return __extends(b,a),b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),_.map(b.attributes,function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.y=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^z$/i)?(c.z=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point3D=f;var g=function(a){function b(b,c,d){a.call(this),this.x=b,this.y=c,this.t=d}return __extends(b,a),b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),_.map(b.attributes,function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.y=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^t$/i)?(c.t=new Date(a.nodeValue),void 0):void 0})},b}(b);a.Point3DTime=g;var h=function(){function a(a){this.axisLabel=a,this.clamp=!1,this.range=[0,1],this.rangeAuto=!0,this.scale="linear",this.align="start",this.labelAlign="end",this.nice=[],this.ticks=10,this.visible=!0}return a.prototype.draw=function(a,b,c){var d=this;this.rangeAuto===!0&&(this.range=[b,c]),"center"===this.align?.5*a.value:"start"===this.align?0:a.value;var e="start"===this.align?"top":"bottom";"start"===this.labelAlign?0:"center"===this.labelAlign?.5*a.value:a.value;var f=null;switch(this.scale){case"identity":f=d3.scale.identity();break;case"power":f=d3.scale.pow();break;case"sqrt":f=d3.scale.sqrt();break;case"log":f=d3.scale.log();break;case"quantize":f=d3.scale.quantize();break;case"quantile":f=d3.scale.quantile();break;case"treshold":f=d3.scale.treshold();break;case"linear":default:f=d3.scale.linear()}f=f.domain(this.range).range([0,a.value]);var g=d3.svg.axis().scale(f).orient(e).ticks(this.ticks);this.ticksFormat.length>0&&g.tickFormat(function(a){return d.ticksFormat[a]})},a}();a.Axis=h;var i=function(){function c(b){this.dataSetLabel=b,this.data=[],this.label="",this.interpolate="linear",this.visible=!0,this.lineStyle=new a.Utils.LineStyle,this.areaStyle=new a.Utils.AreaStyle}return c.prototype.Point=function(){return new b},c.prototype.recalculate=function(){},c.prototype.parse=function(b){var c=this;_.map(b.attributes,function(b){if(b.nodeName.match(/^label$/i))return c.label=b.nodeValue,void 0;if(b.nodeName.match(/^interpolate$/i))return c.interpolate=b.nodeValue,void 0;if(!b.nodeName.match(/^min$/i)&&!b.nodeName.match(/^max$/i)&&!b.nodeName.match(/^step$/i))return b.nodeName.match(/^stroke$/i)?(c.lineStyle.stroke=new a.Utils.Color(b.nodeValue),void 0):b.nodeName.match(/^stroke-width$/i)?(c.lineStyle.strokeWidth=new a.Utils.Size(parseFloat(b.nodeValue)),void 0):b.nodeName.match(/^stroke-opacity$/i)?(c.lineStyle.strokeOpacity=parseFloat(b.nodeValue),void 0):b.nodeName.match(/^fill$/i)?(c.areaStyle.fill=new a.Utils.Color(b.nodeValue),void 0):b.nodeName.match(/^fill-opacity$/i)?(c.areaStyle.fillOpacity=parseFloat(b.nodeValue),void 0):b.nodeName.match(/^data$/i)?(c.parseDataAttr(b),void 0):void 0}),_.map(b.childNodes,function(a){var b=c.Point();b.parse(a),c.data.push(b)})},c.prototype.min=function(){return 0},c.prototype.max=function(){return 0},c.prototype.parseDataAttr=function(a){var b=this;if(void 0!==a.nodeValue&&null!==a.nodeValue&&""!==a.nodeValue.trim()){var c=[];try{c=JSON.parse(a.nodeValue)}catch(d){}_.map(c,function(a){var c=b.Point();c.normalize(a),b.data.push(c)})}},c}();a.DataSet=i;var j=function(b){function c(){b.apply(this,arguments),this.data=[],this.solver=new a.Solver.Solver2D}return __extends(c,b),c.prototype.Point=function(){return new d},c.prototype.recalculate=function(){this.data=this.solver.solve()},c.prototype.min=function(a){return d3.min(this.data,function(b){return b[a]})},c.prototype.max=function(a){return d3.max(this.data,function(b){return b[a]})},c}(i);a.DataSet2D=j;var k=function(b){function c(){b.apply(this,arguments),this.data=[],this.solver=new a.Solver.Solver3D}return __extends(c,b),c.prototype.Point=function(){return new f},c.prototype.recalculate=function(){this.data=this.solver.solve()},c.prototype.min=function(a){return d3.min(this.data,function(b){return b[a]})},c.prototype.max=function(a){return d3.max(this.data,function(b){return b[a]})},c}(i);a.DataSet3D=k;var l=function(){function b(b,c){"undefined"==typeof b&&(b=new a.Utils.Size(400)),"undefined"==typeof c&&(c=new a.Utils.Size(400)),this.chartWidth=b,this.chartHeight=c,this.chartMarginLeft=new a.Utils.Size(10),this.chartMarginRight=new a.Utils.Size(10),this.chartMarginTop=new a.Utils.Size(10),this.chartMarginBottom=new a.Utils.Size(10)}return b}();a.Chart=l;var m=function(b){function c(){b.apply(this,arguments),this.xAxis=new h("x"),this.yAxis=new h("y")}return __extends(c,b),c.prototype.drawAxis=function(){var b=this.min(),c=this.max(),d=new a.Utils.Size(this.chartWidth.value).sub(this.chartMarginLeft).sub(this.chartMarginRight),e=new a.Utils.Size(this.chartHeight.value).sub(this.chartMarginTop).sub(this.chartMarginBottom);this.xAxis.draw(d,b[0],c[0]),this.yAxis.draw(e,b[1],c[1])},c.prototype.min=function(a){return"undefined"==typeof a&&(a="x"),d3.min(this.dataSets,function(b){return b.min(a)})},c.prototype.max=function(a){return"undefined"==typeof a&&(a="x"),d3.max(this.dataSets,function(b){return b.max(a)})},c}(l);a.Chart2D=m;var n=function(b){function c(){b.apply(this,arguments),this.chartDepth=new a.Utils.Size(400),this.xAxis=new h("x"),this.yAxis=new h("y"),this.zAxis=new h("z")}return __extends(c,b),c.prototype.drawAxis=function(){var b=this.min(),c=this.max(),d=new a.Utils.Size(this.chartWidth.value).sub(this.chartMarginLeft).sub(this.chartMarginRight),e=new a.Utils.Size(this.chartHeight.value).sub(this.chartMarginTop).sub(this.chartMarginBottom);this.xAxis.draw(d,b[0],c[0]),this.yAxis.draw(e,b[1],c[1]),this.zAxis.draw(this.chartDepth,b[2],c[2])},c.prototype.min=function(a){return"undefined"==typeof a&&(a="x"),d3.min(this.dataSets,function(b){return b.min(a)})},c.prototype.max=function(a){return"undefined"==typeof a&&(a="x"),d3.max(this.dataSets,function(b){return b.max(a)})},c}(l);a.Chart3D=n}(dChart||(dChart={}));