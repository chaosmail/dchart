/** dchart - v0.0.4 - Sat Jul 27 2013 23:52:24
 *  (c) 2013 Christoph KÃ¶rner, office@chaosmail.at, http://chaosmail.at
 *  License: MIT
 */
"use strict";var __extends=this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);n.prototype=e.prototype,t.prototype=new n},dChart;(function(t){var e=function(){function t(){}return t.getFloat=function(t){return parseFloat(t.nodeValue)},t.getSize=function(t){return new v(parseFloat(t.nodeValue))},t.getColor=function(t){return new f(t.nodeValue)},t.getDate=function(t){return new Date(t.nodeValue)},t}();t.ElementUtils=e;var n=function(){function t(){this.lineStyle=new y,this.areaStyle=new x}return t.prototype.normalize=function(){},t.prototype.parse=function(t){var e=this;_.map(t.attributes,function(t){return t.nodeName.match(/^stroke$/i)?(e.lineStyle.stroke=new f(t.nodeValue),void 0):t.nodeName.match(/^stroke-width$/i)?(e.lineStyle.strokeWidth=new v(parseFloat(t.nodeValue)),void 0):t.nodeName.match(/^stroke-opacity$/i)?(e.lineStyle.strokeOpacity=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^fill$/i)?(e.areaStyle.fill=new f(t.nodeValue),void 0):t.nodeName.match(/^fill-opacity$/i)?(e.areaStyle.fillOpacity=parseFloat(t.nodeValue),void 0):void 0})},t}();t.Point=n;var a=function(t){function e(e){t.call(this),this.x=e}return __extends(e,t),e.prototype.normalize=function(e){t.prototype.parse.call(this,e),"number"==typeof e&&(this.x=e)},e.prototype.parse=function(e){var n=this;t.prototype.parse.call(this,e),_.map(e.attributes,function(t){return t.nodeName.match(/^x$/i)?(n.x=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^y$/i)?(n.x=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^val$/i)?(n.x=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^value$/i)?(n.x=parseFloat(t.nodeValue),void 0):void 0})},e}(n);t.Point1D=a;var i=function(t){function e(e,n){t.call(this),this.x=e,this.y=n}return __extends(e,t),e.prototype.parse=function(e){var n=this;t.prototype.parse.call(this,e),_.map(e.attributes,function(t){return t.nodeName.match(/^x$/i)?(n.x=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^y$/i)?(n.y=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^val$/i)?(n.y=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^value$/i)?(n.y=parseFloat(t.nodeValue),void 0):void 0})},e}(n);t.Point2D=i;var o=function(t){function e(e,n){t.call(this),this.x=e,this.t=n}return __extends(e,t),e.prototype.parse=function(e){var n=this;t.prototype.parse.call(this,e),_.map(e.attributes,function(t){return t.nodeName.match(/^x$/i)?(n.x=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^y$/i)?(n.t=new Date(t.nodeValue),void 0):t.nodeName.match(/^val$/i)?(n.t=new Date(t.nodeValue),void 0):t.nodeName.match(/^value$/i)?(n.t=new Date(t.nodeValue),void 0):t.nodeName.match(/^t$/i)?(n.t=new Date(t.nodeValue),void 0):t.nodeName.match(/^time$/i)?(n.t=new Date(t.nodeValue),void 0):void 0})},e}(n);t.Point2DTime=o;var r=function(t){function e(e,n,a){t.call(this),this.x=e,this.y=n,this.z=a}return __extends(e,t),e.prototype.parse=function(e){var n=this;t.prototype.parse.call(this,e),_.map(e.attributes,function(t){return t.nodeName.match(/^x$/i)?(n.x=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^y$/i)?(n.y=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^z$/i)?(n.z=parseFloat(t.nodeValue),void 0):void 0})},e}(n);t.Point3D=r;var s=function(t){function e(e,n,a){t.call(this),this.x=e,this.y=n,this.t=a}return __extends(e,t),e.prototype.parse=function(e){var n=this;t.prototype.parse.call(this,e),_.map(e.attributes,function(t){return t.nodeName.match(/^x$/i)?(n.x=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^y$/i)?(n.y=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^t$/i)?(n.t=new Date(t.nodeValue),void 0):void 0})},e}(n);t.Point3DTime=s;var u=function(){function t(t){this.axisLabel=t,this.clamp=!1,this.range=[0,1],this.rangeAuto=!0,this.scale="linear",this.align="start",this.labelAlign="end",this.nice=[],this.ticks=10,this.visible=!0}return t.prototype.draw=function(t,e,n){var a=this;this.rangeAuto===!0&&(this.range=[e,n]),this.align==="center"?t.value*.5:this.align==="start"?0:t.value;var i=this.align==="start"?"top":"bottom";this.labelAlign==="start"?0:this.labelAlign==="center"?t.value*.5:t.value;var o=null;switch(this.scale){case"identity":o=d3.scale.identity();break;case"power":o=d3.scale.pow();break;case"sqrt":o=d3.scale.sqrt();break;case"log":o=d3.scale.log();break;case"quantize":o=d3.scale.quantize();break;case"quantile":o=d3.scale.quantile();break;case"treshold":o=d3.scale.treshold();break;case"linear":default:o=d3.scale.linear()}o=o.domain(this.range).range([0,t.value]);var r=d3.svg.axis().scale(o).orient(i).ticks(this.ticks);this.ticksFormat.length>0&&r.tickFormat(function(t){return a.ticksFormat[t]})},t}();t.Axis=u;var l=function(){function t(t){this.dataSetLabel=t,this.data=[],this.label="",this.interpolate="linear",this.visible=!0,this.lineStyle=new y,this.areaStyle=new x}return t.prototype.Point=function(){return new n},t.prototype.recalculate=function(){},t.prototype.parse=function(t){var e=this;_.map(t.attributes,function(t){if(t.nodeName.match(/^label$/i))return e.label=t.nodeValue,void 0;if(t.nodeName.match(/^interpolate$/i))return e.interpolate=t.nodeValue,void 0;if(!t.nodeName.match(/^min$/i)&&!t.nodeName.match(/^max$/i)&&!t.nodeName.match(/^step$/i))return t.nodeName.match(/^stroke$/i)?(e.lineStyle.stroke=new f(t.nodeValue),void 0):t.nodeName.match(/^stroke-width$/i)?(e.lineStyle.strokeWidth=new v(parseFloat(t.nodeValue)),void 0):t.nodeName.match(/^stroke-opacity$/i)?(e.lineStyle.strokeOpacity=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^fill$/i)?(e.areaStyle.fill=new f(t.nodeValue),void 0):t.nodeName.match(/^fill-opacity$/i)?(e.areaStyle.fillOpacity=parseFloat(t.nodeValue),void 0):t.nodeName.match(/^data$/i)?(e.parseDataAttr(t),void 0):void 0}),_.map(t.childNodes,function(t){var n=e.Point();n.parse(t),e.data.push(n)})},t.prototype.min=function(){return 0},t.prototype.max=function(){return 0},t.prototype.parseDataAttr=function(t){var e=this;if(t.nodeValue!==void 0&&t.nodeValue!==null&&t.nodeValue.trim()!==""){var n=[];try{n=JSON.parse(t.nodeValue)}catch(a){}_.map(n,function(t){var n=e.Point();n.normalize(t),e.data.push(n)})}},t}();t.DataSet=l;var h=function(t){function e(){t.apply(this,arguments),this.data=[],this.solver=new w}return __extends(e,t),e.prototype.Point=function(){return new i},e.prototype.recalculate=function(){this.data=this.solver.solve()},e.prototype.min=function(t){return d3.min(this.data,function(e){return e[t]})},e.prototype.max=function(t){return d3.max(this.data,function(e){return e[t]})},e}(l);t.DataSet2D=h;var c=function(t){function e(){t.apply(this,arguments),this.data=[],this.solver=new g}return __extends(e,t),e.prototype.Point=function(){return new r},e.prototype.recalculate=function(){this.data=this.solver.solve()},e.prototype.min=function(t){return d3.min(this.data,function(e){return e[t]})},e.prototype.max=function(t){return d3.max(this.data,function(e){return e[t]})},e}(l);t.DataSet3D=c;var d=function(){function t(t,e){t===void 0&&(t=new v(400)),e===void 0&&(e=new v(400)),this.chartWidth=t,this.chartHeight=e,this.chartMarginLeft=new v(10),this.chartMarginRight=new v(10),this.chartMarginTop=new v(10),this.chartMarginBottom=new v(10)}return t}();t.Chart=d;var p=function(t){function e(){t.apply(this,arguments),this.xAxis=new u("x"),this.yAxis=new u("y")}return __extends(e,t),e.prototype.drawAxis=function(){var t=this.min(),e=this.max(),n=new v(this.chartWidth.value).sub(this.chartMarginLeft).sub(this.chartMarginRight),a=new v(this.chartHeight.value).sub(this.chartMarginTop).sub(this.chartMarginBottom);this.xAxis.draw(n,t[0],e[0]),this.yAxis.draw(a,t[1],e[1])},e.prototype.min=function(t){return t===void 0&&(t="x"),d3.min(this.dataSets,function(e){return e.min(t)})},e.prototype.max=function(t){return t===void 0&&(t="x"),d3.max(this.dataSets,function(e){return e.max(t)})},e}(d);t.Chart2D=p;var m=function(t){function e(){t.apply(this,arguments),this.chartDepth=new v(400),this.xAxis=new u("x"),this.yAxis=new u("y"),this.zAxis=new u("z")}return __extends(e,t),e.prototype.drawAxis=function(){var t=this.min(),e=this.max(),n=new v(this.chartWidth.value).sub(this.chartMarginLeft).sub(this.chartMarginRight),a=new v(this.chartHeight.value).sub(this.chartMarginTop).sub(this.chartMarginBottom);this.xAxis.draw(n,t[0],e[0]),this.yAxis.draw(a,t[1],e[1]),this.zAxis.draw(this.chartDepth,t[2],e[2])},e.prototype.min=function(t){return t===void 0&&(t="x"),d3.min(this.dataSets,function(e){return e.min(t)})},e.prototype.max=function(t){return t===void 0&&(t="x"),d3.max(this.dataSets,function(e){return e.max(t)})},e}(d);t.Chart3D=m;var f=function(){function t(t){this.value=t}return t.prototype.get=function(){return this.value},t.prototype.RGB=function(){return d3.rgb(this.value)},t.prototype.HSL=function(){return d3.hsl(this.value)},t.prototype.HCL=function(){return d3.hcl(this.value)},t.prototype.LAB=function(){return d3.lab(this.value)},t}();t.Color=f;var v=function(){function t(t){this.value=t}return t.prototype.get=function(){return this.value.toString(10)+"px"},t.prototype.sub=function(t){return this.value-=t.value,this},t.prototype.add=function(t){return this.value+=t.value,this},t.prototype.mul=function(t){return this.value*=t.value,this},t.prototype.div=function(t){return this.value/=t.value,this},t}();t.Size=v;var y=function(){function t(){}return t.prototype.get=function(){return""},t}();t.LineStyle=y;var x=function(){function t(){}return t.prototype.get=function(){return""},t}();t.AreaStyle=x;var w=function(){function t(){this.min=0,this.max=10,this.step=1}return t.prototype.fn=function(t){return t},t.prototype.solve=function(t,e,n){t=t||this.min,e=e||this.max,n=n||this.step;var a,o=[];for(a=t;e>=a;a+=n)o.push(new i(a,this.fn(a)));return o},t}();t.Solver2D=w;var g=function(){function t(){this.min=0,this.max=10,this.step=1}return t.prototype.fn=function(t){return t},t.prototype.solve=function(t,e,n){t=t||this.min,e=e||this.max,n=n||this.step;var a,i,o=[];for(a=t;e>=a;a+=n)o.push(new r(a,i,this.fn(a,i)));return o},t}();t.Solver3D=g})(dChart||(dChart={}));