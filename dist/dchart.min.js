/** dchart - v0.0.4 - Wed Aug 07 2013 12:38:57
 *  (c) 2013 Christoph KÃ¶rner, office@chaosmail.at, http://chaosmail.at
 *  License: MIT
 */
var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},dChart;!function(a){var b=function(){function b(){this.lineStyle=new a.Utils.LineStyle,this.areaStyle=new a.Utils.AreaStyle}return b.prototype.normalize=function(b){if(b.hasOwnProperty("lineStyle")){var c=new a.Utils.LineStyle;c.normalize(b.lineStyle),this.lineStyle=c}if(b.hasOwnProperty("areaStyle")){var d=new a.Utils.AreaStyle;d.normalize(b.areaStyle),this.areaStyle=d}},b.prototype.map=function(a,b){a.hasOwnProperty(b.stroke)&&(this.areaStyle.stroke=a[b.stroke]),a.hasOwnProperty(b.strokeWidth)&&(this.areaStyle.strokeWidth=parseFloat(a[b.strokeWidth])),a.hasOwnProperty(b.strokeOpacity)&&(this.areaStyle.strokeOpacity=parseFloat(a[b.strokeOpacity])),a.hasOwnProperty(b.fill)&&(this.areaStyle.fill=a[b.fill]),a.hasOwnProperty(b.fillOpacity)&&(this.areaStyle.fillOpacity=parseFloat(a[b.fillOpacity]))},b.prototype.parse=function(b){var c=this;b.attributes.forEach(function(b){return b.nodeName.match(/^stroke$/i)?(c.areaStyle.stroke=a.Utils.Elem.getColor(b),void 0):b.nodeName.match(/^stroke-width$/i)?(c.areaStyle.strokeWidth=a.Utils.Elem.getFloat(b),void 0):b.nodeName.match(/^stroke-opacity$/i)?(c.areaStyle.strokeOpacity=a.Utils.Elem.getFloat(b),void 0):b.nodeName.match(/^fill$/i)?(c.areaStyle.fill=a.Utils.Elem.getColor(b),void 0):b.nodeName.match(/^fill-opacity$/i)?(c.areaStyle.fillOpacity=a.Utils.Elem.getFloat(b),void 0):void 0})},b}();a.Point=b;var c=function(b){function c(a){b.call(this),this.x=a}return __extends(c,b),c.prototype.normalize=function(a){b.prototype.normalize.call(this,a),a.hasOwnProperty("x")?this.x=parseFloat(a.x):a.hasOwnProperty("y")?this.x=parseFloat(a.y):a.hasOwnProperty("val")&&(this.x=parseFloat(a.val)),a.hasOwnProperty("value")&&(this.x=parseFloat(a.value))},c.prototype.map=function(a,c){b.prototype.map.call(this,a,c),a.hasOwnProperty(c.x)&&(this.x=parseFloat(a[c.x]))},c.prototype.parse=function(c){var d=this;b.prototype.parse.call(this,c),c.attributes.forEach(function(b){return b.nodeName.match(/^x$/i)?(d.x=a.Utils.Elem.getFloat(b),void 0):b.nodeName.match(/^y|val|value$/i)?(d.x=a.Utils.Elem.getFloat(b),void 0):void 0})},c}(b);a.Point1D=c;var d=function(a){function b(b,c){a.call(this),this.x=b,this.y=c}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("x")&&(this.x=parseFloat(b.x)),b.hasOwnProperty("y")?this.y=parseFloat(b.y):b.hasOwnProperty("val")&&(this.y=parseFloat(b.val)),b.hasOwnProperty("value")&&(this.y=parseFloat(b.value))},b.prototype.map=function(b,c){a.prototype.map.call(this,b,c),b.hasOwnProperty(c.x)&&(this.x=parseFloat(b[c.x])),b.hasOwnProperty(c.y)&&(this.y=parseFloat(b[c.y]))},b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),b.attributes.forEach(function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y|val|value$/i)?(c.y=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point2D=d;var e=function(b){function c(a,c){b.call(this),this.t=a,this.y=c}return __extends(c,b),c.prototype.normalize=function(a){b.prototype.normalize.call(this,a),a.hasOwnProperty("x")?this.t=new Date(a.x):a.hasOwnProperty("t")?this.t=new Date(a.t):a.hasOwnProperty("time")?this.t=new Date(a.time):a.hasOwnProperty("date")&&(this.t=new Date(a.date)),a.hasOwnProperty("y")?this.y=parseFloat(a.y):a.hasOwnProperty("val")&&(this.y=parseFloat(a.val)),a.hasOwnProperty("value")&&(this.y=parseFloat(a.value))},c.prototype.map=function(a,c){b.prototype.map.call(this,a,c),a.hasOwnProperty(c.t)&&(this.t=new Date(a[c.t])),a.hasOwnProperty(c.y)&&(this.y=parseFloat(a[c.y]))},c.prototype.parse=function(c){var d=this;b.prototype.parse.call(this,c),c.attributes.forEach(function(b){return b.nodeName.match(/^x|t|time|date$/i)?(d.t=a.Utils.Elem.getDate(b),void 0):b.nodeName.match(/^y|val|value$/i)?(d.y=a.Utils.Elem.getFloat(b),void 0):void 0})},c}(b);a.Point2DTime=e;var f=function(a){function b(b,c,d){a.call(this),this.x=b,this.y=c,this.z=d}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("x")&&(this.x=parseFloat(b.x)),b.hasOwnProperty("y")&&(this.y=parseFloat(b.y)),b.hasOwnProperty("z")&&(this.z=parseFloat(b.z))},b.prototype.map=function(b,c){a.prototype.map.call(this,b,c),b.hasOwnProperty(c.x)&&(this.x=parseFloat(b[c.x])),b.hasOwnProperty(c.y)&&(this.y=parseFloat(b[c.y])),b.hasOwnProperty(c.z)&&(this.z=parseFloat(b[c.z]))},b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),b.attributes.forEach(function(a){return a.nodeName.match(/^x$/i)?(c.x=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.y=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^z$/i)?(c.z=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point3D=f;var g=function(a){function b(b,c,d){a.call(this),this.t=b,this.y=c,this.z=d}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("x")?this.t=new Date(b.x):b.hasOwnProperty("t")?this.t=new Date(b.t):b.hasOwnProperty("time")?this.t=new Date(b.time):b.hasOwnProperty("date")&&(this.t=new Date(b.date)),b.hasOwnProperty("y")&&(this.y=parseFloat(b.y)),b.hasOwnProperty("z")&&(this.z=parseFloat(b.z))},b.prototype.map=function(b,c){a.prototype.map.call(this,b,c),b.hasOwnProperty(c.t)&&(this.t=new Date(b[c.t])),b.hasOwnProperty(c.y)&&(this.y=parseFloat(b[c.y])),b.hasOwnProperty(c.z)&&(this.z=parseFloat(b[c.z]))},b.prototype.parse=function(b){var c=this;a.prototype.parse.call(this,b),b.attributes.forEach(function(a){return a.nodeName.match(/^x|t|time|date$/i)?(c.t=new Date(a.nodeValue),void 0):a.nodeName.match(/^y$/i)?(c.y=parseFloat(a.nodeValue),void 0):a.nodeName.match(/^z$/i)?(c.z=parseFloat(a.nodeValue),void 0):void 0})},b}(b);a.Point3DTime=g}(dChart||(dChart={}));var dChart;!function(a){!function(a){var b=function(){function a(){this.stroke="red",this.strokeWidth=1,this.strokeOpacity=1,this.strokeLinecap="butt",this.strokeDasharray="0"}return a.prototype.normalize=function(a){a.hasOwnProperty("stroke")&&(this.stroke=a.stroke),a.hasOwnProperty("strokeWidth")&&(this.strokeWidth=parseFloat(a.strokeWidth)),a.hasOwnProperty("strokeOpacity")&&(this.strokeOpacity=parseFloat(a.strokeOpacity)),a.hasOwnProperty("strokeLinecap")&&(this.strokeLinecap=a.strokeLinecap),a.hasOwnProperty("strokeDasharray")&&(this.strokeDasharray=a.strokeDasharray)},a}();a.LineStyle=b;var c=function(a){function b(){a.apply(this,arguments),this.fill="blue",this.fillOpacity=1}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("fill")&&(this.fill=b.fill),b.hasOwnProperty("fillOpacity")&&(this.fillOpacity=parseFloat(b.fillOpacity))},b}(b);a.AreaStyle=c;var d=function(a){function b(){a.apply(this,arguments),this.type="circle",this.size=1}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("type")&&(this.type=b.type),b.hasOwnProperty("size")&&(this.size=parseFloat(b.size))},b}(c);a.SymbolStyle=d;var e=function(a){function b(){a.apply(this,arguments),this.fontFamily="sans-serif",this.fontSize=11,this.fontWeight="normal"}return __extends(b,a),b.prototype.normalize=function(b){a.prototype.normalize.call(this,b),b.hasOwnProperty("fontFamily")&&(this.fontFamily=b.fontFamily),b.hasOwnProperty("fontWeight")&&(this.fontWeight=b.fontWeight),b.hasOwnProperty("fontSize")&&(this.fontSize=parseFloat(b.fontSize))},b}(c);a.FontStyle=e}(a.Utils||(a.Utils={})),a.Utils}(dChart||(dChart={}));var dChart;!function(a){var b=function(){function b(){this.gridStyle=new a.Utils.LineStyle,this.labelOffset=34,this.range=[0,1],this.domain=[0,1],this.autorange=!0,this.showGrid=!1,this.scale="linear",this.length=1,this.height=1,this.orientation="x",this.align="start",this.labelAlign="end",this.ticks=10,this.tickSubdivide=!1,this.visible=!0,this.gridStyle.stroke="black",this.gridStyle.strokeWidth=1,this.gridStyle.strokeOpacity=.25}return b.prototype.addScaleFn=function(a,b){this.scale[a]&&"function"==typeof this.scale[a]&&this.scale[a](b)},b.prototype.setOrientation=function(a){return"undefined"==typeof a&&(a="x"),this.orientation=a.match(/^y|v|vertical$/i)?"y":a.match(/^z$/i)?"z":"x",this},b.prototype.setDomain=function(a){return this.domain=a,this},b.prototype.setRange=function(a){return this.range=a,this},b.prototype.setAlign=function(a){return this.align=a.match(/^top|left|start$/i)?"start":a.match(/^bottom|right|end$/i)?"end":"middle",this},b.prototype.setLabelAlign=function(a){return this.labelAlign=a.match(/^top|left|start$/i)?"start":a.match(/^bottom|right|end$/i)?"end":"middle",this},b.prototype.getScale=function(){var a=this.scale.match(/^identity$/i)?d3.scale.identity():this.scale.match(/^pow|power$/i)?d3.scale.pow():this.scale.match(/^sqrt$/)?d3.scale.sqrt():this.scale.match(/^log$/)?d3.scale.log():this.scale.match(/^quantize/)?d3.scale.quantize():this.scale.match(/^quantile$/)?d3.scale.quantile():this.scale.match(/^treshold$/)?d3.scale.treshold():d3.scale.linear();return a.domain(this.domain).range(this.range),a},b.prototype.getAxis=function(){var a="top";"x"===this.orientation&&(a="start"===this.align?"top":"bottom"),"y"===this.orientation&&(a="end"===this.align?"right":"left");var b=d3.svg.axis().scale(this.getScale()).orient(a).ticks(this.ticks);return this.showGrid&&b.tickSize(-this.height,0,3),b},b.prototype.clear=function(){this.svg&&this.svg.remove()},b.prototype.draw=function(a,b,c){this.clear(),this.svg=a.append("g").attr("class","dchart-axis dchart-axis-"+this.orientation),this.svgLabel=a.append("g").attr("class","dchart-axis-label dchart-axis-"+this.orientation+"-label").append("text"),this.redraw(b,c)},b.prototype.redraw=function(a,b){"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=1);var c=this;this.autorange===!0&&this.setDomain([a,b]),this.svg.call(this.getAxis()),this.svg.selectAll(".tick line").style("fill","none").style("stroke",function(a,b){return b>0?c.gridStyle.stroke:"black"}).style("stroke-width",function(a,b){return b>0?c.gridStyle.strokeWidth:1}).style("stroke-opacity",function(a,b){return b>0?c.gridStyle.strokeOpacity:1}).style("stroke-linecap",function(a,b){return b>0?c.gridStyle.strokeLinecap:"butt"}).style("stroke-dasharray",function(a,b){return b>0?c.gridStyle.strokeDasharray:"0"}),this.svgLabel.text(this.label),this.svg.selectAll("path").style("stroke",this.gridStyle.stroke).style("shape-rendering","crispEdges").style("fill","none"),this.svg.selectAll("line").style("stroke",this.gridStyle.stroke).style("shape-rendering","crispEdges").style("fill","none")},b.prototype.normalize=function(b){if(b.hasOwnProperty("label")&&(this.label=b.label),b.hasOwnProperty("align")&&this.setAlign(b.align),b.hasOwnProperty("labelAlign")&&this.setLabelAlign(b.labelAlign),b.hasOwnProperty("labelOffset")&&(this.labelOffset=parseInt(b.labelOffset,10)),b.hasOwnProperty("autorange")&&(this.autorange=b.autorange),b.hasOwnProperty("showGrid")&&(this.showGrid=b.showGrid),b.hasOwnProperty("gridStyle")){var c=new a.Utils.LineStyle;c.normalize(b.gridStyle),this.gridStyle=c,this.showGrid=!0}b.hasOwnProperty("ticks")&&(this.ticks=parseInt(b.ticks,10)),b.hasOwnProperty("scale")&&(this.scale=b.scale),b.hasOwnProperty("range")&&(this.setDomain(b.range),this.autorange=!1)},b}();a.Axis=b;var c=function(a){function b(){a.call(this),this.orientation="x",this.setAlign("bottom"),this.setLabelAlign("right")}return __extends(b,a),b.prototype.redraw=function(b,c){"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=1);var d="middle"===this.align?.5*this.height:"start"===this.align?0:this.height,e="middle"===this.labelAlign?.5*this.length:"start"===this.labelAlign?0:this.length;this.svg.attr("transform","translate(0,"+d+")"),this.svgLabel.attr("x",e).attr("y",this.height+this.labelOffset).attr("text-anchor",this.labelAlign),this.setRange([0,this.length]),a.prototype.redraw.call(this,b,c)},b}(b);a.xAxis=c;var d=function(a){function b(){a.call(this),this.orientation="y",this.setAlign("left"),this.setLabelAlign("top")}return __extends(b,a),b.prototype.redraw=function(b,c){"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=1);var d="middle"===this.align?.5*this.height:"start"===this.align?0:this.height,e="middle"===this.labelAlign?.5*this.length:"start"===this.labelAlign?0:this.length,f="start"===this.labelAlign?"end":"end"===this.labelAlign?"start":"middle";this.svg.attr("transform","translate("+d+",0)"),this.svgLabel.attr("x",-e).attr("y",-this.labelOffset).attr("transform","rotate(-90)").attr("text-anchor",f),this.setRange([this.length,0]),a.prototype.redraw.call(this,b,c)},b}(b);a.yAxis=d;var e=function(a){function b(){a.apply(this,arguments),this.orientation="z"}return __extends(b,a),b}(b);a.zAxis=e}(dChart||(dChart={}));var dChart;!function(a){!function(a){var b=function(){function a(){}return a.getFloat=function(a){return parseFloat(a.nodeValue)},a.getColor=function(a){return a.nodeValue},a.getDate=function(a){return new Date(a.nodeValue)},a}();a.Elem=b}(a.Utils||(a.Utils={})),a.Utils}(dChart||(dChart={}));var dChart;!function(a){!function(a){var b=function(){function a(){this.min=0,this.max=10,this.step=1}return a.prototype.solve=function(){var a=[];return a},a.prototype.normalize=function(a){a.hasOwnProperty("min")&&(this.min=parseFloat(a.min)),a.hasOwnProperty("max")&&(this.max=parseFloat(a.max)),a.hasOwnProperty("min")&&(this.step=parseFloat(a.step)),a.hasOwnProperty("fn")&&"function"==typeof a.fn&&(this.fn=a.fn)},a}();a.Solver=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.solve=function(a,b,c){this.min=a||this.min,this.max=b||this.max,this.step=c||this.step;var d,e=[];if("function"!=typeof this.fn)return e;for(d=this.min;d<=this.max;d+=this.step)e.push({x:this.fn()});return e},b}(b);a.Solver1D=c;var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.solve=function(a,b,c){this.min=a||this.min,this.max=b||this.max,this.step=c||this.step;var d,e=[];if("function"!=typeof this.fn)return e;for(d=this.min;d<=this.max;d+=this.step)e.push({x:d,y:this.fn(d)});return e},b}(b);a.Solver2D=d}(a.Utils||(a.Utils={})),a.Utils}(dChart||(dChart={}));var dChart;!function(a){!function(a){var b=function(){function a(){this.url="",this.dataType="json",this.map={}}return a.prototype.getData=function(a){var b=this;d3.json(this.url,function(c){a(c,b.map)})},a.prototype.normalize=function(a){a.hasOwnProperty("url")&&(this.url=a.url),a.hasOwnProperty("dataType")&&(this.dataType=a.dataType),a.hasOwnProperty("map")&&(this.map=a.map)},a}();a.Loader=b}(a.Utils||(a.Utils={})),a.Utils}(dChart||(dChart={}));var dChart;!function(a){var b=function(){function b(b){this.chart=b,this.showLine=!0,this.showArea=!1,this.showSymbol=!1,this.showValues=!1,this.data=[],this.label="",this.interpolate="linear",this.visible=!0,this.lineStyle=new a.Utils.LineStyle,this.areaStyle=new a.Utils.AreaStyle,this.symbolStyle=new a.Utils.SymbolStyle,this.fontStyle=new a.Utils.FontStyle,this.fontStyle.stroke="none",this.fontStyle.fill="black"}return b.prototype.parse=function(b){var c=this;b.attributes.forEach(function(b){return b.nodeName.match(/^label$/i)?(c.label=b.nodeValue,void 0):b.nodeName.match(/^interpolate$/i)?(c.interpolate=b.nodeValue,void 0):b.nodeName.match(/^stroke$/i)?(c.lineStyle.stroke=a.Utils.Elem.getColor(b),void 0):b.nodeName.match(/^stroke-width$/i)?(c.lineStyle.strokeWidth=parseFloat(b.nodeValue),void 0):b.nodeName.match(/^stroke-opacity$/i)?(c.lineStyle.strokeOpacity=parseFloat(b.nodeValue),void 0):b.nodeName.match(/^fill$/i)?(c.areaStyle.fill=a.Utils.Elem.getColor(b),void 0):b.nodeName.match(/^fill-opacity$/i)?(c.areaStyle.fillOpacity=parseFloat(b.nodeValue),void 0):void 0})},b.prototype.normalize=function(b){var c=this;if(b.hasOwnProperty("interpolate")&&(this.interpolate=b.interpolate),b.hasOwnProperty("label")&&(this.label=b.label),b.hasOwnProperty("showSymbol")&&(this.showSymbol=b.showSymbol),b.hasOwnProperty("showLine")&&(this.showLine=b.showLine),b.hasOwnProperty("symbolStyle")){var d=new a.Utils.SymbolStyle;d.normalize(b.symbolStyle),this.symbolStyle=d,this.showSymbol=!0}if(b.hasOwnProperty("lineStyle")){var e=new a.Utils.LineStyle;e.normalize(b.lineStyle),this.lineStyle=e,this.showLine=!0}if(b.hasOwnProperty("areaStyle")){var f=new a.Utils.AreaStyle;f.normalize(b.areaStyle),this.areaStyle=f,this.showArea=!0}if(b.hasOwnProperty("fontStyle")){var g=new a.Utils.FontStyle;g.normalize(b.fontStyle),this.fontStyle=g,this.showValues=!0}if(b.hasOwnProperty("data")&&"object"==typeof b.data&&b.data.forEach(function(a){var b=c.chart.getPoint();b.normalize(a),c.data.push(b)}),b.hasOwnProperty("dataFn")){var h=this.chart.getSolver();h.normalize(b.dataFn),this.solver=h,this.calculate()}if(b.hasOwnProperty("dataSrc")){var i=new a.Utils.Loader;i.normalize(b.dataSrc),i.getData(function(a,b){a.forEach(function(a){var d=c.chart.getPoint();d.map(a,b),c.data.push(d)}),c.chart.redraw()})}},b.prototype.clear=function(){this.data=[]},b.prototype.calculate=function(){var a=this;if(this.solver){this.clear();var b=this.solver.solve();b.forEach(function(b){var c=a.chart.getPoint();c.normalize(b),a.data.push(c)})}},b.prototype.min=function(a){return d3.min(this.data,function(b){return b[a]})},b.prototype.max=function(a){return d3.max(this.data,function(b){return b[a]})},b}();a.DataSet=b}(dChart||(dChart={}));var dChart;!function(a){!function(a){var b=function(){function a(){this.duration=150,this.delay=0,this.ease="cubic-in-out"}return a.prototype.normalize=function(a){a.hasOwnProperty("ease")&&(this.ease=a.ease),a.hasOwnProperty("delay")&&(this.delay=parseFloat(a.delay)),a.hasOwnProperty("duration")&&(this.duration=parseFloat(a.duration))},a}();a.Transition=b}(a.Utils||(a.Utils={})),a.Utils}(dChart||(dChart={}));var dChart;!function(a){!function(a){var b=function(){function a(){}return a.animateAlongPath=function(a){var b=a.node(),c=b.getTotalLength();return function(a){var d=b.getPointAtLength(Math.floor(c*a));return"translate("+d.x+","+d.y+")"}},a}();a.Animation=b}(a.Utils||(a.Utils={})),a.Utils}(dChart||(dChart={}));var dChart;!function(a){var b=function(){function b(){this.marginLeft=50,this.marginRight=10,this.marginTop=10,this.marginBottom=80,this.width=400,this.height=400,this.nettoWidth=340,this.nettoHeight=310,this.showTransition=!1,this.transition=new a.Utils.Transition,this.fontStyle=new a.Utils.FontStyle,this.dataSets=[],this.format=d3.format("0.2f"),this.fontStyle.fontFamily="sans-serif",this.fontStyle.fontSize=11,this.fontStyle.fontWeight="normal",this.fontStyle.stroke="none",this.fontStyle.fill="black"}return b.prototype.clear=function(){this.svg&&this.svg.remove()},b.prototype.getPoint=function(){return new a.Point},b.prototype.getSolver=function(){return new a.Utils.Solver},b.prototype.redraw=function(){this.nettoWidth=this.width-this.marginLeft-this.marginRight,this.nettoHeight=this.height-this.marginTop-this.marginBottom,this.svg.attr("width",this.width).attr("height",this.height).attr("xmlns","http://www.w3.org/2000/svg"),this.container.attr("width",this.nettoWidth).attr("height",this.nettoHeight).attr("transform","translate("+this.marginLeft+", "+this.marginTop+")"),this.svgDescription.text(this.description).attr("x",.5*this.nettoWidth).attr("y",this.nettoHeight+this.marginBottom-5).attr("text-anchor","middle"),this.svgLabel.text(this.label).attr("x",.5*this.nettoWidth).attr("y",this.nettoHeight+this.marginBottom-20).attr("text-anchor","middle"),this.redrawAxis(),this.redrawData(),this.container.selectAll("text").fontStyle(this.fontStyle),this.svgLabel.fontStyle(this.fontStyle).style("font-size",this.fontStyle.fontSize+2).style("font-weight","bold")},b.prototype.draw=function(){this.nettoWidth=this.width-this.marginLeft-this.marginRight,this.nettoHeight=this.height-this.marginTop-this.marginBottom,this.clear(),this.svg=d3.select(this.elem).append("svg").attr("id","dchart-"+this.elemId),this.container=this.svg.append("g").attr("class","dchart-container"),this.axisContainer=this.container.append("g").attr("class","dchart-container-axis"),this.dataContainer=this.container.append("g").attr("class","dchart-container-data"),this.labelContainer=this.container.append("g").attr("class","dchart-container-label"),this.svgLabel=this.labelContainer.append("text"),this.svgDescription=this.labelContainer.append("text"),this.drawAxis(),this.drawData(),this.redraw()},b.prototype.drawAxis=function(){},b.prototype.redrawAxis=function(){},b.prototype.drawData=function(){},b.prototype.redrawData=function(){},b.prototype.normalize=function(b){var c=this;if(b.hasOwnProperty("elem")&&(this.elemId=b.elem,this.elem=document.getElementById(b.elem)),b.hasOwnProperty("label")&&(this.label=b.label),b.hasOwnProperty("description")&&(this.description=b.description),b.hasOwnProperty("width")&&(this.width=parseFloat(b.width)),b.hasOwnProperty("height")&&(this.height=parseFloat(b.height)),b.hasOwnProperty("marginTop")&&(this.marginTop=parseFloat(b.marginTop)),b.hasOwnProperty("marginLeft")&&(this.marginLeft=parseFloat(b.marginLeft)),b.hasOwnProperty("marginBottom")&&(this.marginBottom=parseFloat(b.marginBottom)),b.hasOwnProperty("marginRight")&&(this.marginRight=parseFloat(b.marginRight)),b.hasOwnProperty("showTransition")&&(this.showTransition=!0),b.hasOwnProperty("transition")){var d=new a.Utils.Transition;d.normalize(b.transition),this.transition=d,this.showTransition=!0}if(b.hasOwnProperty("fontStyle")){var e=new a.Utils.FontStyle;e.normalize(b.fontStyle),this.fontStyle=e}b.hasOwnProperty("dataSets")&&(this.dataSets=[],b.dataSets.forEach(function(b){var d=new a.DataSet(c);d.normalize(b),c.dataSets.push(d)}))},b.prototype.recalculate=function(){this.dataSets.forEach(function(a){a.calculate()})},b}();a.Chart=b;var c=function(b){function c(){b.apply(this,arguments),this.xAxis=new a.xAxis,this.yAxis=new a.yAxis}return __extends(c,b),c.prototype.getPoint=function(){return new a.Point2D},c.prototype.getSolver=function(){return new a.Utils.Solver2D},c.prototype.redraw=function(){this.nettoWidth=this.width-this.marginLeft-this.marginRight,this.nettoHeight=this.height-this.marginTop-this.marginBottom,this.xAxis.length=this.nettoWidth,this.xAxis.height=this.nettoHeight,this.yAxis.length=this.nettoHeight,this.yAxis.height=this.nettoWidth,b.prototype.redraw.call(this)},c.prototype.drawAxis=function(){var a=[this.min("x"),this.min("y")],b=[this.max("x"),this.max("y")];this.xAxis.draw(this.axisContainer,a[0],b[0]),this.yAxis.draw(this.axisContainer,a[1],b[1])},c.prototype.redrawAxis=function(){var a=[this.min("x"),this.min("y")],b=[this.max("x"),this.max("y")];this.xAxis.redraw(a[0],b[0]),this.yAxis.redraw(a[1],b[1])},c.prototype.drawData=function(){},c.prototype.redrawData=function(){},c.prototype.min=function(a){return"undefined"==typeof a&&(a="x"),d3.min(this.dataSets,function(b){return b.min(a)})},c.prototype.max=function(a){return"undefined"==typeof a&&(a="x"),d3.max(this.dataSets,function(b){return b.max(a)})},c.prototype.normalize=function(a){if(b.prototype.normalize.call(this,a),a.hasOwnProperty("axis")){var c=a.axis;c.hasOwnProperty("x")&&this.xAxis.normalize(c.x),c.hasOwnProperty("y")&&this.yAxis.normalize(c.y)}},c}(b);a.Chart2D=c;var d=function(b){function c(){b.apply(this,arguments),this.dataSets=[],this.depth=400,this.xAxis=new a.xAxis,this.yAxis=new a.yAxis,this.zAxis=new a.zAxis}return __extends(c,b),c.prototype.getPoint=function(){return new a.Point3D},c.prototype.drawAxis=function(){var a=[this.min("x"),this.min("y"),this.min("z")],b=[this.max("x"),this.max("y"),this.min("z")];this.xAxis.draw(this.axisContainer,a[0],b[0]),this.yAxis.draw(this.axisContainer,a[1],b[1]),this.zAxis.draw(this.axisContainer,a[2],b[2])},c.prototype.redrawAxis=function(){var a=[this.min("x"),this.min("y"),this.min("z")],b=[this.max("x"),this.max("y"),this.min("z")];this.xAxis.redraw(a[0],b[0]),this.yAxis.redraw(a[1],b[1]),this.zAxis.redraw(a[2],b[2])},c.prototype.drawData=function(){},c.prototype.redrawData=function(){},c.prototype.min=function(a){return"undefined"==typeof a&&(a="x"),d3.min(this.dataSets,function(b){return b.min(a)})},c.prototype.max=function(a){return"undefined"==typeof a&&(a="x"),d3.max(this.dataSets,function(b){return b.max(a)})},c.prototype.normalize=function(a){if(b.prototype.normalize.call(this,a),a.hasOwnProperty("axis")){var c=a.axis;c.hasOwnProperty("x")&&this.xAxis.normalize(c.x),c.hasOwnProperty("y")&&this.yAxis.normalize(c.y),c.hasOwnProperty("z")&&this.zAxis.normalize(c.z)}this.nettoWidth=this.width-this.marginLeft-this.marginRight,this.nettoHeight=this.height-this.marginTop-this.marginBottom,this.xAxis.length=this.nettoWidth,this.xAxis.height=this.nettoHeight,this.yAxis.length=this.nettoHeight,this.yAxis.height=this.nettoWidth,this.zAxis.length=this.depth,this.zAxis.height=this.depth},c}(b);a.Chart3D=d;var e=function(b){function c(a){b.call(this),this.svgSymbolContainer=[],a&&(this.normalize(a),this.draw())}return __extends(c,b),c.prototype.drawData=function(){var a=this;this.dataSets.forEach(function(b,c){a.svgSymbolContainer[c]=a.dataContainer.append("g")})},c.prototype.redrawData=function(){var b=this,c=this.xAxis.getScale(),d=this.yAxis.getScale();this.dataSets.forEach(function(e,f){if(e.showSymbol){var g=b.svgSymbolContainer[f].selectAll("path").data(e.data,function(a){return a.x}),h=d3.svg.symbol().type(e.symbolStyle.type);if(b.showTransition){var i=d3.svg.line().interpolate(e.interpolate).x(function(a){return c(a.x)}).y(function(a){return d(a.y)});g.exit().remove(),g.enter().append("path").areaStyle(e.symbolStyle).attr("transform",function(){return"translate("+c(0)+","+d(0)+") scale(1)"}).attr("d",h).transition().duration(function(){return b.transition.duration*(f+1)}).ease(b.transition.ease).attrTween("transform",function(c,d){return a.Utils.Animation.animateAlongPath(b.svgSymbolContainer[f].append("path").attr("class","animationLine").attr("stroke","none").attr("fill","none").attr("d",i(e.data.slice(0,d+1))))}),b.svgSymbolContainer[f].selectAll(".animationLine").remove()}else g.exit().remove(),g.enter().append("path").areaStyle(e.symbolStyle).attr("transform",function(a){return"translate("+c(a.x)+","+d(a.y)+") scale("+e.symbolStyle.size+")"}).attr("d",h)}})},c}(c);a.PointChart=e;var f=function(a){function b(b){a.call(this),this.svgLineContainer=[],this.svgLine=[],b&&(this.normalize(b),this.draw())}return __extends(b,a),b.prototype.drawData=function(){var b=this;this.dataSets.forEach(function(a,c){b.svgLineContainer[c]=b.dataContainer.append("g").attr("class","dchart-data-set dchart-data-set-"+c),b.svgLine[c]=b.svgLineContainer[c].append("path")}),a.prototype.drawData.call(this)},b.prototype.redrawData=function(){var b=this,c=this.xAxis.getScale(),d=this.yAxis.getScale(),e=[];this.dataSets.forEach(function(a,f){if(a.showLine)if(e[f]=d3.svg.line().interpolate(a.interpolate).x(function(a){return c(a.x)}).y(function(a){return d(a.y)}),b.showTransition){b.svgLine[f].attr("d",e[f](a.data)).attr("stroke",a.lineStyle.stroke).attr("stroke-width",a.lineStyle.strokeWidth).attr("stroke-opacity",a.lineStyle.strokeOpacity).attr("stroke-linecap",a.lineStyle.strokeLinecap).style("fill","none");var g=b.svgLine[f],h=g.node().getTotalLength();b.svgLine[f].attr("stroke-dasharray",h+" "+h).attr("stroke-dashoffset",h).transition().duration(b.transition.duration).delay(function(){return f*b.transition.delay}).attr("stroke-dashoffset",0).each("end",function(){d3.select(this).attr("stroke-dasharray",a.lineStyle.strokeDasharray)})}else b.svgLine[f].attr("d",e[f](a.data)).lineStyle(a.lineStyle).style("fill","none")}),a.prototype.redrawData.call(this)},b}(e);a.LineChart=f;var g=function(a){function b(b){a.call(this),this.svgAreaContainer=[],this.svgArea=[],b&&(this.normalize(b),this.draw())}return __extends(b,a),b.prototype.drawData=function(){var b=this;this.dataSets.forEach(function(a,c){b.svgAreaContainer[c]=b.dataContainer.append("g").attr("class","dchart-data-set dchart-data-set-"+c),b.svgArea[c]=b.svgAreaContainer[c].append("path")}),a.prototype.drawData.call(this)},b.prototype.redrawData=function(){var b=this,c=this.xAxis.getScale(),d=this.yAxis.getScale(),e=[];this.dataSets.forEach(function(a,f){e[f]=d3.svg.area().interpolate(a.interpolate).x(function(a){return c(a.x)}).y0(b.nettoHeight).y1(function(a){return d(a.y)}),b.showTransition?b.svgArea[f].areaStyle(a.areaStyle).transition().duration(b.transition.duration).delay(function(a,c){return c*b.transition.delay}).ease(b.transition.ease).attr("d",e[f](a.data)):b.svgArea[f].attr("d",e[f](a.data)).areaStyle(a.areaStyle)}),a.prototype.redrawData.call(this)},b}(e);a.AreaChart=g;var h=function(a){function b(b){a.call(this),this.svgRectContainer=[],b&&(this.normalize(b),this.draw())}return __extends(b,a),b.prototype.drawData=function(){var a=this;this.dataSets.forEach(function(b,c){b.showValues=!0,a.svgRectContainer[c]=a.dataContainer.append("g").attr("class","dchart-data-set dchart-data-set-"+c)})},b.prototype.redrawData=function(){var a=this,b=this.xAxis.getScale(),c=this.yAxis.getScale();this.dataSets.forEach(function(d,e){var f=a.svgRectContainer[e].selectAll("rect").data(d.data,function(a){return a.x});if(0!==d.data.length){var g=a.xAxis.svg.selectAll(".tick"),h=g[0].length,i=.5*(a.nettoWidth/(h+1)),j=a.nettoWidth/(h+1)/a.dataSets.length;a.showTransition?(f.exit().remove(),f.enter().append("rect").areaStyle(d.areaStyle).attr("x",function(a){return b(a.x)-i+e*j}).attr("y",a.nettoHeight).attr("width",function(){return j}).attr("height",0).transition().duration(a.transition.duration).delay(function(b,c){return c*a.transition.delay}).ease(a.transition.ease).attr("y",function(b){return a.nettoHeight-c(b.y)}).attr("height",function(a){return Math.abs(c(a.y))})):(f.exit().remove(),f.enter().append("rect").areaStyle(d.areaStyle).attr("x",function(a){return b(a.x)-i+e*j}).attr("y",function(b){return a.nettoHeight-c(b.y)}).attr("width",function(){return j}).attr("height",function(a){return Math.abs(c(a.y))}))}})},b}(c);a.BarChart=h;var i=function(a){function b(b){a.call(this),this.svgScatterContainer=[],b&&(this.normalize(b),this.draw())}return __extends(b,a),b.prototype.drawData=function(){var a=this;this.dataSets.forEach(function(b,c){a.svgScatterContainer[c]=a.dataContainer.append("g").attr("class","dchart-data-set dchart-data-set-"+c)})},b.prototype.redrawData=function(){var a=this,b=this.xAxis.getScale(),c=this.yAxis.getScale();this.dataSets.forEach(function(d,e){var f=a.svgScatterContainer[e].selectAll("path").data(d.data,function(a){return a.x}),g=d3.svg.symbol().type(d.symbolStyle.type);a.showTransition?(f.exit().remove(),f.enter().append("path").areaStyle(d.symbolStyle).attr("transform",function(a){return"translate("+b(a.x)+","+c(a.y)+") scale(0)"}).attr("d",g).transition().duration(a.transition.duration).delay(function(b,c){return c*a.transition.delay}).ease(a.transition.ease).attr("transform",function(a){return"translate("+b(a.x)+","+c(a.y)+") scale("+d.symbolStyle.size+")"})):(f.exit().remove(),f.enter().append("path").areaStyle(d.symbolStyle).attr("transform",function(a){return"translate("+b(a.x)+","+c(a.y)+") scale("+d.symbolStyle.size+")"}).attr("d",g))})},b}(c);a.ScatterChart=i;var j=function(b){function c(a){b.call(this),this.svgPieContainer=[],this.numPoints=0,this.colorScale=d3.scale.category20c(),a&&(this.normalize(a),this.draw())}return __extends(c,b),c.prototype.getPoint=function(){var b=new a.Point1D;return b.areaStyle.stroke="none",b.areaStyle.fill=this.colorScale(this.numPoints),this.numPoints+=1,b},c.prototype.getSolver=function(){return new a.Utils.Solver1D},c.prototype.drawData=function(){var a=this;this.dataSets.forEach(function(b,c){b.showValues=!0,a.svgPieContainer[c]=a.dataContainer.append("g").attr("class","dchart-data-set dchart-data-set-"+c).attr("transform","translate("+.5*a.nettoWidth+","+.5*a.nettoHeight+")")})},c.prototype.redrawData=function(){var a=this;this.dataSets.forEach(function(b,c){var d=d3.layout.pie().sort(null).value(function(a){return a.x
}),e=a.nettoHeight>a.nettoWidth?.5*a.nettoWidth:.5*a.nettoHeight,f=(c+1)*e/a.dataSets.length,g=c*e/a.dataSets.length,h=d3.svg.arc().outerRadius(f).innerRadius(g),i=a.svgPieContainer[c].selectAll("path").data(d(b.data)).enter();a.showTransition?i.append("path").each(function(b){b._endAngle=b.endAngle,b._formatedValue=a.format(b.value),b.endAngle=b.startAngle}).attr("d",h).areaStyle(function(a){return a.data.areaStyle}).transition().duration(a.transition.duration).delay(function(b,c){return c*a.transition.delay}).ease(a.transition.ease).attrTween("d",function(a){var b=d3.interpolate(a.startAngle,a._endAngle);return function(c){return a.endAngle=b(c),h(a)}}).each("end",function(a){d3.select(this.parentNode).append("text").text(a._formatedValue).attr("transform","translate("+h.centroid(a)+") scale(1)").style("text-anchor","middle").fontStyle(b.fontStyle)}):(i.append("path").attr("d",h).areaStyle(function(a){return a.data.areaStyle}),i.append("text").text(function(b){return a.format(b.value)}).attr("transform",function(a){return"translate("+h.centroid(a)+")"}).fontStyle(b.fontStyle).style("text-anchor","middle"))})},c}(b);a.PieChart=j}(dChart||(dChart={}));